<html>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <head>
        <style>
        h1 {text-align: center;}
        h2 {text-align: center;}
        h4 {text-align: center;}
        p {text-align: center;}
        div {text-align: center;}
        </style>
    
    </head>
    <body onload='init()'>
        <h1>What is the recipe to a best selling video game?</h1>
        <h4>CS 416 Narrative Visualization by Isabella Iniguez</h4>
        <h3>Global Sales by Platform</h3>
        <p>Is there somthing else at play here? Maybe where people are able tp play the game contributes to sales. In this barplot, we can see the trends in what video game platforms tend to sell the most. </p>
            <p>Hover over each bar to see how the numbers break down based on region!</p>

            <!-- <svg width="300" height="300"></svg> -->
            <svg width="300" height="300"></svg>

        <script>
            async function init(){
                const data = await d3.csv('https://iniguezisabella.github.io/data/meta_sales.csv');

                var width = 300;
                var height = 300;
                var margin = 50;

                var x = d3.scaleBand().domain([0,100]).range([0,height])
                var y = d3.scaleLinear().domain([0,1300]).range([height,0])

                var xaxis = d3.axisBottom(x).tickValues([0,25,50,100]).tickFormat(d3.format("~s"));
                var yaxis = d3.axisLeft(y).tickValues([100,500,1000,1300]).tickFormat(d3.format("~s"));

                d3.select("svg")
                .attr("width", width)
                .attr("height", height)
                .append("g")
                    .attr("transform", "translate("+margin+","+margin+")")
                .selectAll('circle').data(data).enter().append('circle')
                .attr("cx",function(d) {return x(d.metacritic);})
                .attr("cy",function(d) {return y(d.Global_Sales);})
                .attr("r", 10)
                .style("fill", "black")

                d3.select("svg").append("g")
                .attr("transform", "translate("+margin+","+margin+")")
                .call(yaxis);

                d3.select("svg").append("g")
                .attr("transform", "translate("+margin+","+(height+margin)+")")
                .call(xaxis)

                // -----------------

                // const data = await d3.csv('https://iniguezisabella.github.io/data/platform_sales.csv');

                // var width = 500;
                // var height = 250;
                // var x = d3.scaleBand()
                // .domain(data.map(d => d.Platform))
                // .range([0,width]) //
                // .padding(0.2);

                // var y = d3.scaleLinear().domain([0,1300]).range([height,0])
                // var margin = 75; // changed from 50

                // d3.select("svg")
                // .attr("width", width + 2*margin)
                // .attr("height", height + 2*margin)
                // .append("g")
                // .attr("transform", "translate("+margin+","+margin+")")
                // .selectAll('rect').data(data).enter().append('rect') //bars
                // .attr("x",function(d,i) {return x(d.Platform);}) // {return x(i);})
                // .attr("y",function(d,i) {return y(d.Global_Sales);}) // {return y(d);})
                // .attr('width', x.bandwidth())
                // .attr('height',function(d,i) {return height - y(d.Global_Sales);})
                // .attr("fill", "#69b3a2")

                // d3.select("svg").append("g")
                // .attr("transform", "translate("+margin+","+margin+")")
                // .call(d3.axisLeft(y));

                // d3.select("svg").append("g")
                // .attr("transform", "translate("+margin+","+(height+margin)+")")
                // .call(d3.axisBottom(x))//.call(xaxis)
                // .selectAll("text")  
                // .style("text-anchor", "end")
                // .attr("dx", "-.8em")
                // .attr("dy", ".15em")
                // .attr("transform", "rotate(-65)");
            }

        </script>

        <div class="navbar">
            <a href="CS416NarViz-A.html">1</a>
            <a href="CS416NarViz-B.html">2</a>
            <a href="CS416NarViz-C.html">3</a>
            <a href="backup.html">test</a>
          </div>
    
          <p>Dataset: <a href="https://www.kaggle.com/datasets/gregorut/videogamesales">Kaggle</a> </p> 
    </body>
</html>